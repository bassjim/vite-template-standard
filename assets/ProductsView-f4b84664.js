import{_ as k,R as x,r as p,o,c as l,b as u,a as t,F as h,f,g as w,h as L,w as _,t as g,e as m}from"./index-d761a16c.js";import{S as P}from"./sweetalert2.all-1b0220ca.js";const{VITE_URL:n,VITE_PATH:d}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"bassjim",BASE_URL:"/vite-template-standard/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{products:[],filteredProducts:[],isLoading:!1,categories:[]}},components:{RouterLink:x},methods:{getProducts(){this.$http.get(`${n}/api/${d}/products/all`).then(e=>{this.products=e.data.products})},filterProducts(e=1){let a=`${n}/api/${d}/products?page=${e}`;const i=this.$route.query.category;i&&i!=="全部"&&(a=`${n}/api/${d}/products?page=${e}&category=${i}`),this.$http.get(a).then(r=>{this.filteredProducts=r.data.products,this.pagination=r.data.pagination,this.$router.push({path:"products",query:{category:i,page:e}})}).catch(r=>console.dir(r))},getCategories(){const e=[...new Set(this.products.map(a=>a.category))];this.categories=e},addTOCart(e){const a={product_id:e,qty:1};this.$http.post(`${n}/api/${d}/cart`,{data:a}).then(i=>P.fire("成功加入購物車"))},async loadData(){this.isLoading=!0,this.data=null;const a=await(await fetch("https://api.example.com/data")).json();this.data=a,this.isLoading=!1}},mounted(){this.getProducts(),this.filterProducts(),this.$showLoading()},watch:{$route:{handler(e){e.name==="products"&&this.filterProducts(this.$route.query.page)},deep:!0}}},C={class:"d-flex mt-5 justify-content-around container"},T={class:"nav nav-pills mb-3 flex-column",id:"pills-tab",role:"tablist"},E=t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link active",id:"pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#pills-home",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"true"},"Home")],-1),R=t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#pills-profile",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"false"},"Profile")],-1),q=t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"pills-contact-tab","data-bs-toggle":"pill","data-bs-target":"#pills-contact",type:"button",role:"tab","aria-controls":"pills-contact","aria-selected":"false"},"Contact")],-1),B={class:"nav-link",id:"pills-contact-tab","data-bs-toggle":"pill","data-bs-target":"#pills-contact",type:"button",role:"tab","aria-controls":"pills-contact","aria-selected":"false"},D={key:0,class:"d-flex row row-cols-2 row-cols-md-3 flex-wrap col-md-8"},S={class:"card mb-3 d-flex"},j={class:"row g-0"},I={class:"mx-auto"},N=["src"],O={class:""},U={class:"card-body"},A={class:"card-title"},H={class:"card-text"},F=t("p",{class:"card-text"},[t("small",{class:"text-muted"},"Last updated 3 mins ago")],-1),M={class:"card-footer bg-transparent border-success d-flex justify-content-evenly"},z=["onClick"],G=t("i",{class:"bi bi-cart4"},null,-1);function J(e,a,i,r,c,v){const y=p("VueLoading"),b=p("router-link"),$=p("RouterLink");return o(),l(h,null,[u(y,{active:c.isLoading},null,8,["active"]),t("div",C,[t("ul",T,[E,R,q,(o(!0),l(h,null,f(c.categories,s=>(o(),l("li",{class:"nav-item",role:"presentation",key:s},[(o(),L(b,{to:{query:{category:s,page:1}},key:s},{default:_(()=>[t("button",B,g(s),1)]),_:2},1032,["to"]))]))),128))]),c.filteredProducts[c.filteredProducts.length-1]?(o(),l("div",D,[(o(!0),l(h,null,f(c.filteredProducts,s=>(o(),l("div",{class:"tab-pane fade show active",id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab",key:s.id},[u($,{to:`/product/${s.id}`,class:"card overflow-hidden"},{default:_(()=>[t("div",S,[t("div",j,[t("div",I,[t("img",{src:s.imageUrl,class:"img-fluid rounded-star",alt:"..."},null,8,N)]),t("div",O,[t("div",U,[t("h5",A,g(s.title),1),t("p",H,"商品描述："+g(s.description),1),F]),t("div",M,[u(b,{to:`product/${s.id}`,class:"btn btn-secondary"},{default:_(()=>[m("查看單一產品")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-primary",onClick:K=>v.addTOCart(s.id)},[G,m("加入購物車")],8,z)])])])])]),_:2},1032,["to"])]))),128))])):w("",!0)])],64)}const X=k(V,[["render",J]]);export{X as default};
